# rewards_config.yaml - Balatro Poker RL Reward Configuration
# This file defines the reward structure for training RL agents

# Core Terminal Rewards
# These are sparse rewards given at episode end
outcome:
  win_bonus: 1000              # Flat reward for beating the blind (chips >= target)
  loss_penalty: 500            # Penalty for exhausting plays without winning

# Efficiency Rewards
# Encourage winning quickly and conserving plays
efficiency:
  play_conservation_bonus: 200  # Bonus PER UNUSED play when winning (max 4 plays = 800 bonus)
  step_penalty: 1.0             # Small per-action cost to encourage finishing episodes quickly

# Incremental Progress Rewards
# Shape rewards based on chip accumulation
progress:
  chip_gain_scale: 1.0          # Multiplier for raw chip delta rewards from playing hands
  chip_normalization: 100       # Divide chip gains by this to prevent dominating other rewards

  # Milestone bonuses when crossing percentage thresholds of target score
  target_threshold_bonuses:
    - threshold: 0.75           # 75% of target score reached
      bonus: 25
    - threshold: 0.90           # 90% of target score reached
      bonus: 50

# Hand Recognition Rewards
# Small bonuses for playing stronger poker hands (encourages learning hand evaluation)
# Keep these small so chip values remain primary signal
hand_quality:
  enabled: true
  bonuses:
    high_card: 0                # Tier 1 (weakest hand)
    pair: 2
    two_pair: 4
    three_of_a_kind: 6
    straight: 8
    flush: 10
    full_house: 12
    four_of_a_kind: 15
    straight_flush: 20          # Tier 9 (strongest hand)

# Penalties
# Discourage undesirable behaviors
penalties:
  invalid_action: 25            # Penalty for attempting illegal moves
  desperate_play: 10            # Penalty for playing High Card when plays_left < 2 and far from target
  desperate_threshold: 0.5      # "Far from target" = less than this fraction of target score

# Advanced Shaping (Optional)
# These features can be enabled for more sophisticated reward engineering
advanced:
  # Reward winning with safety margin (beating target by large amount)
  safety_margin_bonus:
    enabled: false
    per_chip_over_target: 0.1   # Bonus per chip over target (e.g., 50 chips over = +5 reward)
    max_bonus: 100              # Cap the maximum safety margin bonus

  # Exploration bonuses (encourage trying diverse actions)
  exploration:
    enabled: false
    action_diversity_bonus: 5   # Bonus for using different action types in episode

# Metadata
version: "v0"                   # Reward config version (matches game ruleset version)
description: "Conservative efficiency-focused reward scheme. Heavily rewards play conservation, neutral on risk-taking, no discard penalties."
